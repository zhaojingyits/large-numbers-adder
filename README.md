# large-numbers-adder

An GUI add calculator based on linked list. Data Struct homework. Using wxWidgets as GUI library.

# 基本说明

这是数据结构课程作业，本人不进行进一步的维护。

作业要求是实现两个大整数的相加运算。具体要求将数字存入单链表。这一做法仅供作业学习，实际上在竞赛中也很少使用链表进行这样的操作。

# 设计软硬件环境

本设计采用C++语言版本C++ 11开发，通过面向对象程序设计方法进行算法的描述。

软件环境使用Windows 10 x64操作系统编译和运行，并利用虚拟机软件测试证实了对于Windows XP x64和Windows 7 x86的兼容性。本设计程序不兼容Windows 2000.

开发工具上，使用Code::Blocks作为开发的IDE，Windows下的编译器为GCC 5.1.0。Code::Blocks是一个开源、免费、跨平台的C++ IDE，能够满足C/C++编程的各种需求,是进行C++编程的理想工具。图形界面采用wxGlade进行设计。wxGlade是用wxPython开发的wxWidgets界面设计工具，支持直接导出cpp、py等代码文件。

# 功能设计与描述

界面方面，采用wxWidgets 3.1.1图形库开发图形界面。wxWidgets是开源、跨平台的C++图形库，同时，wxWidgets在其他平台上的绑定wxPython、wxRuby等也被广泛应用。采用wxWidgets进行的程序开发与MFC程序开发较为类似，但前者具备了Unicode支持、原生主题样式支持等新特性，并可部署于跨平台程序开发。

设计中采用NumberNode类存储数字。NumberNode类为一带头结点的单链表。类的protected成员包括一个整型的data变量和一个指向下一个对象的指针。数字在NumberNode中按照以下形式存储：头节点不存储数据，头节点next指针指向的节点存储个位，存储个位的节点next指针指向的节点存储十位，存储十位的节点next指针指向的节点存储百位，以此类推。

NumberNode类还规定了三种构造函数。第一种为无参构造，此构造函数即将next节点指向NULL。第二种为传入一个string字符串的构造。此方法即将字符串的各位分别写入NumberNode的节点。第三种为传入两个NumberNode对象的构造。此方法直接在新对象构造出传入两个NumberNode表示数字的和。

除构造函数外，NumberNode类还规定了析构函数、toString函数和GetMiddle函数。析构方法用于在完成计算后释放内存空间，toString函数用于将相加的结果传出为可读的字符串，GetMiddle函数用于获得链表的中间位。

图形界面上，设计了三个选项卡，分别是一次性加法、连续加法和关于程序。一次性加法选项卡允许用户输入两个加数并通过按下Generate Result按钮算出结果。连续加法选项卡从0开始连续让用户输入加数，然后通过按下Add按钮或者Alt+A组合键获得相加结果。关于选项卡显示程序和作者信息。在各个选项卡下方还设有状态栏以显示结果的中值。

# 设计总结

## 设计方法

本程序在利用课本所学的头插法、尾插法基础上，进一步通过C++的类和对象、构造函数和析构函数等特性进行设计。由于单链表这种数据结构比较简单，我们也进行了大量的练习，对于关键步骤的算法设计并没有太大的困难。但是，C++的类毕竟不同于C的结构体，C++的new/delete也与C的malloc/free有很大区别。比如，C的free只是一个函数，作用是释放指向的内存空间。而C++的delete是一种运算，它包括两个过程：先执行所指向对象的析构函数，然后再释放对应的内存空间。显然，对于单链表，delete运算从某种意义上可以看成是递归的，执行一次delete this->next就相当于要delete整个单链表。这与C的free函数有很明显的区别。如果再利用C风格的free的用法往delete上面套，就会无法正常运行。同时笔者还发现，上述错误做法产生的错误难判断、难发现。使用错误写法的析构函数编写的程序，在Windows 7、Windows 10上面都能正常运行，而在Windows XP上闪退。因此对于这种基础的语法细节不可一知半解，最好做到一开始就不出错。同时还要尽可能在多平台、多场合进行测试。

## 实现技术

一开始，本人在命令行进行设计，当时为了简化流程，输入的值采用的就是前文所属的数据结构，而在输出链表的时候却采用高位在前，next指向低位的方式。这种方式也能解决问题，但要用于图形界面，就必须要用字符串输出，而不能逐次用cout输出每一位。因此，我将输出数组的过程由头插法改为尾插法实现，解决了这个不和谐的因素，程序才更加严谨。
